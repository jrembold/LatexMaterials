\mode<presentation>

% Any required packages
\RequirePackage{tikz,etoolbox}
\RequirePackage[duration=60, fontsize=24]{pdfpcnotes}
\RequirePackage{listings}
\RequirePackage{lstautogobble}
\usetikzlibrary{positioning,calc}

% Settings
\useinnertheme{rounded}
\useoutertheme{WU2}
\usecolortheme{WU2}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[rounded][shadow=false]
\setbeamertemplate{enumerate items}[default]

\BeforeBeginEnvironment{frame}{
	\setbeamercolor{background canvas}{bg=Background}
	\setbeamertemplate{background}{}
}
%\defbeamertemplate{background}{normal}{
  %\pgfuseimage{bg}
%}
%\defbeamertemplate{background}{example}{
  %\pgfuseimage{bg_ex}
%}
\define@key{beamerframe}{example}[true]{
	\setbeamercolor{background canvas}{bg=green!25}
	\setbeamertemplate{background}{}
}

\newif\ifsol
\solfalse
\DeclareOption{sols}{\soltrue}
\ProcessOptions

% Section Slides
\AtBeginSection[]{
	{
	\setbeamertemplate{footline}{}
	\begin{frame}[noframenumbering]
		\begin{tikzpicture}[remember picture, overlay]
			\fill[red] (current page.north west) rectangle (current page.south east);
			\node[opacity=0.4, anchor=south east, inner sep=0pt, outer sep=0pt] at ([xshift=2cm]current page.south east) {\includegraphics[width=18cm]{section_background.png}};
			\fill[Foreground, opacity=0.8] ([yshift=2cm]current page.west) rectangle ([yshift=1cm]current page.east);
			\node[font=\LARGE, Background, anchor=west] at ([yshift=1.5cm, xshift=1cm]current page.west) {\insertsectionhead};
			\node[font=\small, gold, anchor=south west] at ([yshift=2cm]current page.west) {Upcoming:};
		\end{tikzpicture}
	\end{frame}
	}
}


% Solutions at bottom right of slides
\newcommand{\exsol}[1]{
	\ifsol{%
	\begin{tikzpicture}[remember picture, overlay]
		\node<+->[anchor=east, yshift=5mm, font=\scriptsize] at (current page.south east) {\textbf{Solution:} #1};
	\end{tikzpicture}
	}\fi
	\pnote{Solution: #1}
}



\newenvironment{poll}
{%
	\begin{enumerate}[A)]
}{%
	\end{enumerate}
}

\lstdefinestyle{slides}{
			%backgroundcolor= \color{BG},
			basicstyle=\ttfamily,
			autogobble,
			tabsize=3,
			language=python,
			upquote=true,
			commentstyle= \color{gray}\itshape,
			keywordstyle=\color{red}\bfseries,
			showstringspaces=false,
			stringstyle=\color{blue},
			literate=%
			{0}{{{\color{orange}0}}}1
			{1}{{{\color{orange}1}}}1
			{2}{{{\color{orange}2}}}1
			{3}{{{\color{orange}3}}}1
			{4}{{{\color{orange}4}}}1
			{5}{{{\color{orange}5}}}1
			{6}{{{\color{orange}6}}}1
			{7}{{{\color{orange}7}}}1
			{8}{{{\color{orange}8}}}1
			{9}{{{\color{orange}9}}}1,
			numbers=none,
			numberstyle=\color{gray},
			moredelim={[s][\color{green}]{@}{@}},
			moredelim=**[is][\color<+>{green}]{|}{|},
		}

\lstnewenvironment{glowscript}[1][language=python]{
	\lstset{frameround = Fttt,
		style = slides,
		#1,
	}
}{}

\mode<all>
